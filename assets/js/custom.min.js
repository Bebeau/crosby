!function($){var e="columnizer-original-dom";$.fn.columnize=function(t){function i(e,t){try{e.append(t)}catch(i){e[0].appendChild(t[0])}}this.each(function(){var t=$(this);t.data(e,t.clone(!0,!0))}),this.cols=[],this.offset=0,this.before=[],this.lastOther=0,this.prevMax=0,this.debug=0,this.setColumnStart=null,this.elipsisText="";var n={width:400,columns:!1,buildOnce:!1,overflow:!1,doneFunc:function(){},target:!1,ignoreImageLoading:!0,columnFloat:"left",lastNeverTallest:!1,accuracy:!1,precise:!1,manualBreaks:!1,cssClassPrefix:"",elipsisText:"...",debug:0};return t=$.extend(n,t),"string"==typeof t.width&&(t.width=parseInt(t.width,10),isNaN(t.width)&&(t.width=n.width)),"function"==typeof t.setColumnStart&&(this.setColumnStart=t.setColumnStart),"string"==typeof t.elipsisText&&(this.elipsisText=t.elipsisText),t.debug&&(this.debug=t.debug),t.setWidth||(t.precise?t.setWidth=function(e){return 100/e}:t.setWidth=function(e){return Math.floor(100/e)}),this.each(function(){function e(e,t){var i=t?".":"";return m.length?i+m+"-"+e:i+e}function s(n,s,o,l){for(;(g||o.height()<l)&&s[0].childNodes.length;){var a=s[0].childNodes[0];if($(a).find(e("columnbreak",!0)).length)return;if($(a).hasClass(e("columnbreak")))return;i(n,$(a))}if(0!==n[0].childNodes.length){var r=n[0].childNodes,d=r[r.length-1];n[0].removeChild(d);var h=$(d);if(3==h[0].nodeType){var u=h[0].nodeValue,c=t.width/18;t.accuracy&&(c=t.accuracy);for(var f,m=null;o.height()<l&&u.length;){var v=u.indexOf(" ",c);f=-1!=v?u.substring(0,v):u,m=document.createTextNode(f),i(n,$(m)),u=u.length>c&&-1!=v?u.substring(v):""}if(o.height()>=l&&null!==m&&(n[0].removeChild(m),u=m.nodeValue+u),!u.length)return!1;h[0].nodeValue=u}return s.contents().length?s.prepend(h):i(s,h),3==h[0].nodeType}}function o(t,n,l,a){if(!t.contents(":last").find(e("columnbreak",!0)).length&&!t.contents(":last").hasClass(e("columnbreak"))&&n.contents().length){var r=n.contents(":first");if("undefined"==typeof r.get(0)||1!=r.get(0).nodeType)return;var d=r.clone(!0);if(r.hasClass(e("columnbreak")))i(t,d),r.remove();else if(g)i(t,d),r.remove();else if(1==d.get(0).nodeType&&!d.hasClass(e("dontend")))if(i(t,d),d.is("img")&&l.height()<a+20)r.remove();else if(r.hasClass(e("dontsplit"))&&l.height()<a+20)r.remove();else if(d.is("img")||r.hasClass(e("dontsplit")))d.remove();else{if(d.empty(),s(d,r,l,a))r.addClass(e("split"));else{if(r.addClass(e("split")),"OL"==r.get(0).tagName){var h=d.get(0).childElementCount+d.get(0).start;r.attr("start",h+1)}r.children().length&&o(d,r,l,a)}if(0===d.get(0).childNodes.length)d.remove(),r.removeClass(e("split"));else if(1==d.get(0).childNodes.length){var u=d.get(0).childNodes[0];if(3==u.nodeType){var c=/\S/,f=u.nodeValue;c.test(f)||(d.remove(),r.removeClass(e("split")))}}}}}function l(){if(!d.data("columnized")||1!=d.children().length){if(d.data("columnized",!0),d.data("columnizing",!0),d.empty(),d.append($("<div class='"+e("first")+" "+e("last")+" "+e("column")+" ' style='width:100%; float: "+t.columnFloat+";'></div>")),$col=d.children().eq(d.children().length-1),$destroyable=u.clone(!0),t.overflow){for(targetHeight=t.overflow.height,s($col,$destroyable,$col,targetHeight),$destroyable.contents().find(":first-child").hasClass(e("dontend"))||o($col,$destroyable,$col,targetHeight);$col.contents(":last").length&&a($col.contents(":last").get(0));){var n=$col.contents(":last");n.remove(),$destroyable.prepend(n)}for(var l="",r=document.createElement("DIV");$destroyable[0].childNodes.length>0;){var h=$destroyable[0].childNodes[0];if(h.attributes)for(var c=0;c<h.attributes.length;c++)0===h.attributes[c].nodeName.indexOf("jQuery")&&h.removeAttribute(h.attributes[c].nodeName);r.innerHTML="",r.appendChild($destroyable[0].childNodes[0]),l+=r.innerHTML}var f=$(t.overflow.id)[0];f.innerHTML=l}else i($col,$destroyable.contents());d.data("columnizing",!1),t.overflow&&t.overflow.doneFunc&&t.overflow.doneFunc(),t.doneFunc()}}function a(t){return 3==t.nodeType?/^\s+$/.test(t.nodeValue)&&t.previousSibling?a(t.previousSibling):!1:1!=t.nodeType?!1:$(t).hasClass(e("dontend"))?!0:0===t.childNodes.length?!1:a(t.childNodes[t.childNodes.length-1])}function r(){if(v=0,c!=d.width()){c=d.width();var n=Math.round(d.width()/t.width),r=t.width,f=t.height;if(t.columns&&(n=t.columns),g&&(n=u.find(e("columnbreak",!0)).length+1,r=!1),1>=n)return l();if(!d.data("columnizing")){d.data("columnized",!0),d.data("columnizing",!0),d.empty(),d.append($("<div style='width:"+t.setWidth(n)+"%; float: "+t.columnFloat+";'></div>")),C=d.children(":last"),i(C,u.clone()),h=C.height(),d.empty();var m=h/n,p=!0,y=3,b=!1;t.overflow?(y=1,m=t.overflow.height):f&&r&&(y=1,m=f,b=!0);for(var j=0;y>j&&20>j;j++){d.empty();var Q,w,C,T;try{Q=u.clone(!0)}catch(x){Q=u.clone()}Q.css("visibility","hidden");for(var N=0;n>N;N++)w=0===N?e("first"):"",w+=" "+e("column"),w=N==n-1?e("last")+" "+w:w,d.append($("<div class='"+w+"' style='width:"+t.setWidth(n)+"%; float: "+t.columnFloat+";'></div>"));for(N=0;N<n-(t.overflow?0:1)||b&&Q.contents().length;){for(d.children().length<=N&&d.append($("<div class='"+w+"' style='width:"+t.setWidth(n)+"%; float: "+t.columnFloat+";'></div>")),C=d.children().eq(N),b&&C.width(r+"px"),s(C,Q,C,m),o(C,Q,C,m);C.contents(":last").length&&a(C.contents(":last").get(0));)T=C.contents(":last"),T.remove(),Q.prepend(T);N++,0===C.contents().length&&Q.contents().length?C.append(Q.contents(":first")):N!=n-(t.overflow?0:1)||t.overflow||Q.find(e("columnbreak",!0)).length&&n++}if(t.overflow&&!b){var k=!1,M=document.all&&-1!=navigator.appVersion.indexOf("MSIE 7.");if(k||M){for(var O="",S=document.createElement("DIV");Q[0].childNodes.length>0;){var I=Q[0].childNodes[0];for(N=0;N<I.attributes.length;N++)0===I.attributes[N].nodeName.indexOf("jQuery")&&I.removeAttribute(I.attributes[N].nodeName);S.innerHTML="",S.appendChild(Q[0].childNodes[0]),O+=S.innerHTML}var L=$(t.overflow.id)[0];L.innerHTML=O}else $(t.overflow.id).empty().append(Q.contents().clone(!0))}else if(b)d.children().each(function(t){C=d.children().eq(t),C.width(r+"px"),0===t?C.addClass(e("first")):t==d.children().length-1?C.addClass(e("last")):(C.removeClass(e("first")),C.removeClass(e("last")))}),d.width(d.children().length*r+"px");else{C=d.children().eq(d.children().length-1),Q.contents().each(function(){C.append($(this))});var F=C.height(),z=F-m,H=0,P=1e7,_=0,q=!1,A=0;d.children().each(function(t){return function(i){var n=t.children().eq(i),s=n.children(":last").find(e("columnbreak",!0)).length;if(!s){var o=n.height();q=!1,H+=o,o>_&&(_=o,q=!0),P>o&&(P=o),A++}}}(d));var D=H/A;0===H?j=y:t.lastNeverTallest&&q?(v+=5,m+=30,j==y-1&&y++):_-P>30?m=D+30:Math.abs(D-m)>20?m=D:j=y}d.append($("<br style='clear:both;'>"))}d.find(e("column",!0)).find(":first"+e("removeiffirst",!0)).remove(),d.find(e("column",!0)).find(":last"+e("removeiflast",!0)).remove(),d.find(e("split",!0)).find(":first"+e("removeiffirst",!0)).remove(),d.find(e("split",!0)).find(":last"+e("removeiflast",!0)).remove(),d.data("columnizing",!1),t.overflow&&t.overflow.doneFunc(),t.doneFunc()}}}var d=$(t.target?t.target:this),h=$(this).height(),u=$("<div></div>"),c=0,f=!1,g=t.manualBreaks,m=n.cssClassPrefix;"string"==typeof t.cssClassPrefix&&(m=t.cssClassPrefix);var v=0;if(i(u,$(this).contents().clone(!0)),!t.ignoreImageLoading&&!t.target&&!d.data("imageLoaded")&&(d.data("imageLoaded",!0),$(this).find("img").length>0)){var p=function(e,n){return function(){e.data("firstImageLoaded")||(e.data("firstImageLoaded","true"),i(e.empty(),n.children().clone(!0)),e.columnize(t))}}($(this),u);return $(this).find("img").one("load",p),void $(this).find("img").one("abort",p)}d.empty(),r(),t.buildOnce||$(window).resize(function(){t.buildOnce||(d.data("timeout")&&clearTimeout(d.data("timeout")),d.data("timeout",setTimeout(r,200)))})})},$.fn.uncolumnize=function(){this.each(function(){var t=$(this),i;(i=t.data(e))&&t.replaceWith(i)})},$.fn.renumberByJS=function(e,t,i,n){if(this.setList=function(e,t,i){var n=this.before.parents(),s;if(s=$(e[this.offset-1]).find(">*"),s.last()[0].tagName!=i.toUpperCase())return this.debug&&console.log("Last item in previous column, isn't a list..."),0;s=s.length;var o=1;if(o=this.lastOther<=0?this.before.children().length+1:$(n[this.lastOther]).children().length+1,$(e[this.offset]).find(i+":first li.split").length){var l=$(e[this.offset-1]).find(i+":last li:last");if(""===this.elipsisText||$(e[this.offset-1]).find(i+":last ~ div").length||$(e[this.offset-1]).find(i+":last ~ p").length);else if(0==$(l).find("ul, ol, dl").length){var a=l.last().text(),r=a.length;";"==a.substring(r-1)?a.substring(r-4)!=this.elipsisText+";"&&(a=a.substring(0,r-1)+this.elipsisText+";"):a.substring(r-3)!=this.elipsisText&&(a+=this.elipsisText),l.last().text(a)}0==$(e[this.offset]).find(i+":first >li.split >"+i).length&&o--}if(1==s&&(o+=this.prevMax),this.nest>1){this.debug&&console.log("Supposed to be a nested list...decr"),o--;var d=$(e[this.offset-1]).find(i+":first li.split:first");d.length>0&&(this.debug&&console.log("Previous column started with a split item, so that count is one less than expected"),o--),d=$(e[this.offset]).find(i+":first li:first").clone(),d.children().remove(),$.trim(d.text()).length>0&&(this.debug&&console.log("If that was a complete list in the previous column, don't decr."),o++,0==$(e[this.offset-1]).find(">"+i+":last ").children().length&&(this.debug&&console.log("unless that was empty, in which case revert"),o--))}else{var d=$(e[this.offset]).find(i+":first li:first "+i+".split li.split");d.length>0&&(this.debug&&console.log("[Nested] Column started with a split item, so that count is one less than expected"),o--)}return this.debug&&console.log("Setting the start value to "+o+" ("+this.prevMax+")"),o>0&&("function"==typeof this.setColumnStart?this.setColumnStart(t,o):t.attr("start",o)),0},"undefined"==typeof i&&(i=!1),"undefined"==typeof n&&(n=!1),!i&&!n)throw"renumberByJS(): Bad param, must pass an id or a class";var s="";this.prevMax=1,s=n?"."+n:"#"+i;var o=e.toLowerCase(),l=e.toUpperCase();for(this.cols=$(s),this.debug&&console.log("There are "+this.cols.length+" items, looking for "+o),this.before=$(this.cols[0]).find(o+":last"),this.prevMax=this.before.children().length,this.offset=1;this.offset<this.cols.length;this.offset++)if(this.debug&&console.log("iterating "+this.offset+"...[of "+this.cols.length+"]"),this.offset%t!=0){if(this.before=$(this.cols[this.offset-1]).find(o+":last"),this.before.length){this.debug&&console.log("Have some "+e+" elements in the previous column");var a=$(this.cols[this.offset]).find(o+":first"),r=$(this.cols[this.offset]).find("*:first");if(r[0]!==a[0])continue;var d=this.before.parents();this.lastOther=0;for(var h=!1;this.lastOther<d.length;this.lastOther++)if(d[this.lastOther].tagName!=l&&"LI"!=d[this.lastOther].tagName){h=!0,this.lastOther--;break}this.nest=1,$(this.cols[this.offset]).find(">"+o+":first li "+o+":first").length&&(this.nest=2),this.setList(this.cols,a,o),this.lastOther--,a=$(this.cols[this.offset]).find(o+":first li "+o+":first"),a.length&&(this.before=$(this.cols[this.offset-1]).find(">"+o+":last li "+o+":last"),this.prevMax=0,this.nest=1,this.setList(this.cols,a,o));var u=$(this.cols[this.offset-1]).find(">"+o+":last");this.prevMax=u.children().length}}else this.debug&&console.log("First column (in theory..)"),this.prevMax=1;return 0}}(jQuery);var isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent),init={onReady:function(){init.loaded(),init.navHover(),init.videoModal(),init.photoModal(),init.activeTab(),init.navSlideIn(),init.linkPatch(),init.subNavCollapse(),isMobile?(init.mobileHoverFix(),jQuery(".imageWrap").columnize({columns:2})):init.pageIn()},mobileHoverFix:function(){if("ontouchstart"in document.documentElement)for(var e=document.styleSheets.length-1;e>=0;e--){var t=document.styleSheets[e];if(t.cssRules)for(var i=t.cssRules.length-1;i>=0;i--){var n=t.cssRules[i];n.selectorText&&(n.selectorText=n.selectorText.replace(":hover",":active"))}}jQuery("a, button").each(function(){jQuery(this).bind("touchstart touchend",function(){jQuery(this).toggleClass("hover")})})},subNavCollapse:function(){jQuery(".single-portfolios .menu-item").hover(function(){jQuery(this).find("ul").stop().slideToggle("slow")}),jQuery(".page .menu-item").hover(function(){jQuery(this).find("ul").stop().slideToggle("slow")}),jQuery(".page .menu-item a").click(function(e){e.preventDefault()})},shrinkLogo:function(){jQuery("header").hasClass("sub")&&!isMobile&&(jQuery("header").addClass("shrink"),jQuery("#singlePortfolio").addClass("shrink"),jQuery("#singlePage").addClass("shrink"))},loaded:function(){setTimeout(function(){jQuery("#loader").addClass("loaded")},250),setTimeout(function(){jQuery("#loader").remove()},1e3)},navHover:function(){var e=jQuery(".home_bg").css("background-image");bg_url=/^url\((['"]?)(.*)\1\)$/.exec(e),jQuery(".sub-menu a").hover(function(){if(jQuery(this)[0].hasAttribute("data-image")){var e=jQuery(this).attr("data-image");jQuery(".home_bg").fadeOut("fast",function(){jQuery(".home_bg").css("background-image","url("+e+")"),jQuery(".home_bg").fadeIn()})}},function(){jQuery(this)[0].hasAttribute("data-image")&&jQuery(".home_bg").fadeOut("fast",function(){jQuery(".home_bg").css("background-image","url("+bg_url[2]+")"),jQuery(".home_bg").fadeIn()})})},videoModal:function(){jQuery(".singlevideo").click(function(e){e.preventDefault();var t=jQuery(this).attr("data-video"),i=jQuery(this).attr("data-type");if("youtube"===i){var n="https://www.youtube.com/embed/"+t+"?autoplay=1";jQuery(".videoFrame").attr("src",n)}else{var s="https://player.vimeo.com/video/"+t+"?autoplay=1";jQuery(".videoFrame").attr("src",s)}jQuery("#videomodal").on("hidden.bs.modal",function(){jQuery(".videoFrame").removeAttr("src")})})},photoModal:function(){jQuery(".singlephoto").click(function(e){e.preventDefault();var t=jQuery(this).attr("data-photo");jQuery("#photomodal .modal-body").append('<img src="'+t+'" alt="" />'),jQuery("#photomodal").on("hidden.bs.modal",function(){jQuery(".modal-body img").remove()})})},activeTab:function(){jQuery(".single .portfolio-menu ul li:nth-child(2) .tab").tab("show"),jQuery(".tab-content").addClass("in"),jQuery(".portfolio-menu ul li a").click(function(e){e.preventDefault(),jQuery("html, body").animate({scrollTop:0},"slow");var t=jQuery(this).attr("href");jQuery(".portfolio-menu ul li").removeClass("active"),jQuery(this).parent().addClass("active"),jQuery(this).hasClass("info")||(jQuery(".tab-content").removeClass("in"),setTimeout(function(){jQuery("#bio").collapse("hide"),jQuery(".pane").removeClass("active"),jQuery(t).addClass("active")},500),setTimeout(function(){jQuery(".tab-content").addClass("in")},800))})},pageIn:function(){jQuery(".contentwrap").addClass("slideIn")},linkPatch:function(){jQuery(".sub-menu li a").click(function(e){e.preventDefault(),init.navSlideOut();var t=jQuery(this).attr("href");setTimeout(function(){jQuery(location).attr("href",t)},1250)})},navSlideIn:function(){setTimeout(function(){jQuery("#logo").addClass("slideIn")},250),setTimeout(function(){jQuery(".menu li").each(function(e){jQuery(this).delay(50*e).queue(function(){jQuery(this).addClass("slideIn").dequeue()})})},500),setTimeout(function(){init.shrinkLogo()},1500)},navSlideOut:function(){setTimeout(function(){jQuery(jQuery(".menu li").get().reverse()).each(function(e){jQuery(this).delay(50*e).queue(function(){jQuery(this).removeClass("slideIn").dequeue()})})},250),setTimeout(function(){jQuery("#logo").removeClass("slideIn"),jQuery(".home_bg").fadeOut("slow")},1e3)},pageAjax:function(){jQuery(".home .menu a").on("click",function(e){e.preventDefault(),init.navSlideOut();var t=jQuery(this).attr("data-link"),i=t+" .wrap > *";jQuery.ajax({type:"GET",url:t,dataType:"html",cache:!0,beforeSend:function(){jQuery(".wrap").addClass("out"),jQuery("header").addClass("sub")},success:function(){jQuery(".wrap").load(i,function(){jQuery(".wrap").removeClass("out")}),init.navSlideIn()},complete:function(){t!==window.location&&window.history.pushState({path:t},"",t)}})})}};jQuery(document).ready(function(){init.onReady()});