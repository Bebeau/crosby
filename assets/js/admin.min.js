var ajaxurl=meta_image.ajaxurl,init={onReady:function(){init.saveVideo(),init.removeVideo(),init.onSelectChange(),init.lockPhotos(),init.subCatOrdering(),init.videoOrdering()},getURLvar:function(e){for(var t=window.location.search.substring(1),r=t.split("&"),a=0;a<r.length;a++){var i=r[a].split("=");if(i[0]==e)return i[1]}return!1},saveVideo:function(e){jQuery.ajax({url:ajaxurl,type:"GET",data:{action:"setVideo",postID:e},dataType:"html",error:function(e,t,r){window.alert(e+" :: "+t+" :: "+r)}})},removeVideo:function(e,t,r){jQuery.ajax({url:ajaxurl,type:"GET",data:{action:"removeVideo",postID:e,video_type:r,key:t},dataType:"html",error:function(e,t,r){window.alert(e+" :: "+t+" :: "+r)}}),jQuery(".button-remove").click(function(e){e.preventDefault();var t=jQuery(this).parent().parent().attr("data-post"),r=jQuery(this).parent().parent().attr("data-type"),a=jQuery(this).parent().attr("data-key");init.removeVideo(t,a,r),jQuery(this).parent().remove()})},setAgent:function(e,t){jQuery.ajax({url:ajaxurl,type:"GET",data:{postID:t,agentID:e,action:"assignAgent"},dataType:"html",error:function(e,t,r){window.alert(e+" :: "+t+" :: "+r)}})},onSelectChange:function(){jQuery(".assignedAgent").change(function(){var e=jQuery(this).attr("data-post"),t=jQuery(".assignedAgent").val();init.setAgent(t,e)}),jQuery(".email-button").click(function(e){e.preventDefault(),jQuery(".emails").append('<input type="text" name="cc_emails[]" placeholder="email@address.." />')})},lockPhotos:function(){jQuery(document).on("DOMNodeInserted",function(){jQuery('select.attachment-filters [value="uploaded"]').attr("selected",!0).parent().trigger("change")})},saveCatOrder:function(e,t){jQuery.ajax({url:ajaxurl,type:"GET",data:{order:e,postID:t,action:"setOrder"},dataType:"JSON"})},subCatOrdering:function(){jQuery("#sortable").sortable({placeholder:"ui-state-highlight",update:function(e,t){order=[],jQuery("#sortable tr").each(function(){order.push(jQuery(this).attr("data-order"))});var r=jQuery("#sortable").attr("data-post");init.saveCatOrder(order,r)}}),jQuery("#sortable").disableSelection(),order=[],jQuery("#sortable tr").each(function(){order.push(jQuery(this).attr("data-order"))});var e=jQuery("#sortable").attr("data-post");init.saveCatOrder(order,e)},saveVideoOrder:function(e,t,r){jQuery.ajax({url:ajaxurl,type:"GET",data:{type:t,order:e,postID:r,action:"setVideoOrder"},dataType:"JSON"})},videoOrdering:function(){jQuery(".videoSort").sortable({placeholder:"ui-state-highlight",update:function(e,t){var r=[];jQuery(".videoSort li").each(function(){r.push({id:jQuery(this).attr("data-order"),type:jQuery(this).attr("data-video")})});var a=jQuery(".videoSort").attr("data-post"),i=jQuery(".videoSort").attr("data-type");init.saveVideoOrder(r,i,a)}}),jQuery(".videoSort").disableSelection()}};jQuery(document).ready(function(){init.onReady()});