var ajaxurl=meta_image.ajaxurl,init={onReady:function(){init.saveVideo(),init.removeVideo(),init.onSelectChange(),init.lockPhotos(),init.subCatOrdering(),init.videoOrdering()},getURLvar:function(e){for(var t=window.location.search.substring(1),a=t.split("&"),r=0;r<a.length;r++){var i=a[r].split("=");if(i[0]==e)return i[1]}return!1},saveVideo:function(e){jQuery.ajax({url:ajaxurl,type:"GET",data:{action:"setVideo",postID:e},dataType:"html",error:function(e,t,a){window.alert(e+" :: "+t+" :: "+a)}})},removeVideo:function(e,t,a){jQuery.ajax({url:ajaxurl,type:"GET",data:{action:"removeVideo",postID:e,video_type:a,key:t},dataType:"html",error:function(e,t,a){window.alert(e+" :: "+t+" :: "+a)}}),jQuery(".button-remove").click(function(e){e.preventDefault();var t=jQuery(this).parent().parent().attr("data-post"),a=jQuery(this).parent().parent().attr("data-type"),r=jQuery(this).parent().attr("data-key");init.removeVideo(t,r,a),jQuery(this).parent().remove()})},setAgent:function(e,t){jQuery.ajax({url:ajaxurl,type:"GET",data:{postID:t,agentID:e,action:"assignAgent"},dataType:"html",error:function(e,t,a){window.alert(e+" :: "+t+" :: "+a)}})},onSelectChange:function(){jQuery(".assignedAgent").change(function(){var e=jQuery(this).attr("data-post"),t=jQuery(".assignedAgent").val();init.setAgent(t,e)}),jQuery(".email-button").click(function(e){e.preventDefault(),jQuery(".emails").append('<input type="text" name="cc_emails[]" placeholder="email@address.." />')})},lockPhotos:function(){jQuery(document).on("DOMNodeInserted",function(){jQuery('select.attachment-filters [value="uploaded"]').attr("selected",!0).parent().trigger("change")})},saveCatOrder:function(e,t){jQuery.ajax({url:ajaxurl,type:"GET",data:{order:e,postID:t,action:"setOrder"},dataType:"JSON"})},subCatOrdering:function(){jQuery("#sortable").sortable({placeholder:"ui-state-highlight",update:function(e,t){order=[],jQuery("#sortable tr").each(function(){order.push(jQuery(this).attr("data-order"))});var a=jQuery("#sortable").attr("data-post");init.saveCatOrder(order,a)}}),jQuery("#sortable").disableSelection()},saveVideoOrder:function(e,t,a){jQuery.ajax({url:ajaxurl,type:"GET",data:{type:t,order:e,postID:a,action:"setVideoOrder"},dataType:"JSON"})},videoOrdering:function(){jQuery(".videoSort").sortable({placeholder:"ui-state-highlight",update:function(e,t){var a=[];jQuery(".videoSort li").each(function(){a.push({id:jQuery(this).attr("data-order"),type:jQuery(this).attr("data-video")})});var r=jQuery(".videoSort").attr("data-post"),i=jQuery(".videoSort").attr("data-type");init.saveVideoOrder(a,i,r)}}),jQuery(".videoSort").disableSelection()}};jQuery(document).ready(function(){init.onReady()});